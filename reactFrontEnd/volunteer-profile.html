<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Hello React!</title>
    <script src="build/react.js"></script>
    <script src="build/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>
    <div id="volunteer-info" class="front-page">

    </div>
    <script src="js/jquery-2.1.4.min.js"></script>
    <script src="js/url.min.js"></script>
    <script type="text/babel">
      var ProfileBox = React.createClass({
        loadProfile: function() {
          $.ajax({
            url: this.props.url,
            dataType: 'json',
            cache: false,
            success: function(data) {
              this.setState({data: data});
            }.bind(this),
            error: function(xhr, status, err) {
              console.error(this.props.url, status, err.toString());
            }.bind(this)
          });
        },
        getInitialState: function() {
          return {data: []};
        },
        componentDidMount: function() {
          this.loadProfile();
          setInterval(this.loadProfile, this.props.pollInterval);
        },
        render: function() {
          var volData = this.state.data;
          return(
            <div className="profileBox">
              <h1>Volunteer Profile</h1>
              <h2>{volData.first_name} {volData.last_name}</h2>
              <p>Username: {volData.username}</p>
              <a href=""> Change Password</a>
              <p> Birthdate: {volData.birthdate}</p>
              <p> Address: {volData.address}<br/>{volData.state} {volData.zipcode}</p>
              <p>Phone: {volData.phone}</p>
              <p>Emergency Contact:</p>
              <div className="emergency contact">
                <p>Name: </p>
                <p>Phone: </p>
                <p>Email:</p>
              </div>
              <p>Total Hours Ever:</p>
              <p>Total Hours This Year: </p>
              <a href="">Update this Information</a>
            </div>
          );
        }
      });

      var id = url('?id');
      var profileBoxDiv = <ProfileBox url={"http://localhost:8000/volunteer/" + id} pollInterval={10000} />;

      ReactDOM.render(
       profileBoxDiv,
        document.getElementById('volunteer-info')
      );
    </script>
  </body>
</html>